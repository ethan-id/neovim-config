import type {FC, ReactNode} from 'react';
import ff from './featureFlags';

type FeatureToggleProps = {
    flag: string;
    /** Optional user identifier to check the flag against */
    userID?: string;
    /** Content to show when the flag is disabled (optional) */
    fallback?: ReactNode;
    /** The components to render if the flag is enabled */
    children: ReactNode;
};

export const FeatureToggle: FC<FeatureToggleProps> = ({flag, userID, fallback = null, children}) => {
    const enabled = ff.isEnabled(flag, userID || '');

    return <>{enabled ? children : fallback}</>;
};
